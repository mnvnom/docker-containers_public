---
- name: Run Jenkins container
  docker_container:
    name: jenkins
    image: jenkins/jenkins:lts
    state: started
    ports:
     - "8080:8080"
    restart_policy: always
    networks:
    - name: prometheus-network

- name: Pause for Jenkins container up
  pause:
    seconds: 10

- name: Update inside Jenkins container
  shell: docker exec -it -u root jenkins apt-get update

- name: Install yamllint inside Jenkins container
  shell: docker exec -it -u root jenkins apt-get install -y yamllint

- name: Retrieve Initial Admin Password
  shell: docker exec -it jenkins cat /var/jenkins_home/secrets/initialAdminPassword
  register: initial_admin_password

- debug:
    var: initial_admin_password.stdout